{"ast":null,"code":"var _jsxFileName = \"/Applications/Git/trybe github/trybe/projetos/projeto-app-receita/sd-030-a-project-recipes-app/src/components/IngredientCheckbox.jsx\",\n  _s = $RefreshSig$();\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom/cjs/react-router-dom.min';\nimport RecipeContext from '../context/RecipeContext';\nimport '../css/CardRecipeDetails.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function IngredientCheckbox(_ref) {\n  _s();\n  let {\n    ingrediente,\n    index\n  } = _ref;\n  const {\n    listIngredients,\n    setAllChecked\n  } = useContext(RecipeContext);\n  const {\n    id\n  } = useParams();\n  const {\n    pathname\n  } = useLocation();\n  const [checkedOrNot, setCheckedOrNot] = useState(false);\n  const verifyChecked = useCallback(() => {\n    const recipes = localStorage.getItem('inProgressRecipes') || '';\n    const verifyButton = listIngredients && listIngredients.every(ingredient => recipes.includes(ingredient));\n    setAllChecked(verifyButton);\n    const verifyIngredients = recipes && recipes.includes(ingrediente);\n    setCheckedOrNot(verifyIngredients);\n  }, [ingrediente, listIngredients, setAllChecked]);\n  const checkIngredient = target => {\n    const recipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const allIngredients = pathname.includes('/meals') ? recipes.meals[id] : recipes.drinks[id];\n    let checkedIngredients;\n    if (target.checked) {\n      checkedIngredients = [...allIngredients, target.value];\n    } else {\n      checkedIngredients = allIngredients.filter(ingredient => ingredient !== target.value);\n    }\n    if (pathname.includes('/meals')) recipes.meals[id] = checkedIngredients;\n    if (pathname.includes('/drinks')) recipes.drinks[id] = checkedIngredients;\n    localStorage.setItem('inProgressRecipes', JSON.stringify(recipes));\n  };\n  useEffect(() => {\n    verifyChecked();\n  }, [verifyChecked]);\n  return /*#__PURE__*/_jsxDEV(\"label\", {\n    \"data-testid\": `${index}-ingredient-step`,\n    htmlFor: `ingredient-list-${index}`,\n    className: checkedOrNot ? 'crossed' : '',\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      id: `ingredient-list-${index}`,\n      value: ingrediente,\n      onClick: _ref2 => {\n        let {\n          target\n        } = _ref2;\n        return checkIngredient(target);\n      },\n      onChange: verifyChecked,\n      checked: checkedOrNot\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), ingrediente]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(IngredientCheckbox, \"5juPw4qx50LPjLAGPn3d4puIKvc=\", false, function () {\n  return [useParams, useLocation];\n});\n_c = IngredientCheckbox;\nIngredientCheckbox.propTypes = {\n  index: PropTypes.number.isRequired,\n  ingrediente: PropTypes.string.isRequired\n};\nvar _c;\n$RefreshReg$(_c, \"IngredientCheckbox\");","map":{"version":3,"names":["PropTypes","React","useCallback","useContext","useEffect","useState","useLocation","useParams","RecipeContext","IngredientCheckbox","ingrediente","index","listIngredients","setAllChecked","id","pathname","checkedOrNot","setCheckedOrNot","verifyChecked","recipes","localStorage","getItem","verifyButton","every","ingredient","includes","verifyIngredients","checkIngredient","target","JSON","parse","allIngredients","meals","drinks","checkedIngredients","checked","value","filter","setItem","stringify","propTypes","number","isRequired","string"],"sources":["/Applications/Git/trybe github/trybe/projetos/projeto-app-receita/sd-030-a-project-recipes-app/src/components/IngredientCheckbox.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useLocation, useParams } from 'react-router-dom/cjs/react-router-dom.min';\nimport RecipeContext from '../context/RecipeContext';\nimport '../css/CardRecipeDetails.css';\n\nexport default function IngredientCheckbox({ ingrediente, index }) {\n  const { listIngredients, setAllChecked } = useContext(RecipeContext);\n  const { id } = useParams();\n  const { pathname } = useLocation();\n\n  const [checkedOrNot, setCheckedOrNot] = useState(false);\n\n  const verifyChecked = useCallback(() => {\n    const recipes = localStorage.getItem('inProgressRecipes') || '';\n    const verifyButton = listIngredients && listIngredients\n      .every((ingredient) => recipes.includes(ingredient));\n    setAllChecked(verifyButton);\n    const verifyIngredients = recipes && recipes.includes(ingrediente);\n    setCheckedOrNot(verifyIngredients);\n  }, [ingrediente, listIngredients, setAllChecked]);\n\n  const checkIngredient = (target) => {\n    const recipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const allIngredients = pathname.includes('/meals')\n      ? recipes.meals[id] : recipes.drinks[id];\n    let checkedIngredients;\n    if (target.checked) {\n      checkedIngredients = [...allIngredients, target.value];\n    } else {\n      checkedIngredients = allIngredients\n        .filter((ingredient) => ingredient !== target.value);\n    }\n\n    if (pathname.includes('/meals')) recipes.meals[id] = checkedIngredients;\n    if (pathname.includes('/drinks')) recipes.drinks[id] = checkedIngredients;\n\n    localStorage.setItem('inProgressRecipes', JSON.stringify(recipes));\n  };\n\n  useEffect(() => {\n    verifyChecked();\n  }, [verifyChecked]);\n\n  return (\n    <label\n      data-testid={ `${index}-ingredient-step` }\n      htmlFor={ `ingredient-list-${index}` }\n      key={ index }\n      className={ checkedOrNot ? 'crossed' : '' }\n    >\n      <input\n        type=\"checkbox\"\n        id={ `ingredient-list-${index}` }\n        value={ ingrediente }\n        onClick={ ({ target }) => checkIngredient(target) }\n        onChange={ verifyChecked }\n        checked={ checkedOrNot }\n      />\n      { ingrediente }\n    </label>\n  );\n}\n\nIngredientCheckbox.propTypes = {\n  index: PropTypes.number.isRequired,\n  ingrediente: PropTypes.string.isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}