{"ast":null,"code":"var _jsxFileName = \"/Applications/Git/trybe github/trybe/projetos/projeto-app-receita/sd-030-a-project-recipes-app/src/pages/RecipeInProgress.jsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect } from 'react';\nimport { useHistory, useLocation, useParams } from 'react-router-dom/cjs/react-router-dom.min';\nimport ButtonFavorite from '../components/ButtonFavorite';\nimport ButtonShare from '../components/ButtonShare';\nimport CardRecipeDetails from '../components/CardRecipeDetails';\nimport RecipeContext from '../context/RecipeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RecipeInProgress() {\n  _s();\n  const {\n    allChecked,\n    recipe\n  } = useContext(RecipeContext);\n  const {\n    pathname\n  } = useLocation();\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const date = new Date(Date.now());\n  useEffect(() => {\n    const recipes = JSON.parse(localStorage.getItem('inProgressRecipes')) || {\n      drinks: {},\n      meals: {}\n    };\n    if (pathname.includes('/meals') && !recipes.meals[id]) recipes.meals[id] = [];\n    if (pathname.includes('/drinks') && !recipes.drinks[id]) recipes.drinks[id] = [];\n    localStorage.setItem('inProgressRecipes', JSON.stringify(recipes));\n  }, [pathname, id]);\n  const finishRecipe = () => {\n    const doneStorage = localStorage.getItem('doneRecipes');\n    const doneRecipe = JSON.parse(localStorage.getItem('doneRecipes')) || [];\n    const receita = {\n      id: recipe.idDrink || recipe.idMeal,\n      nationality: recipe.strArea || '',\n      name: recipe.strDrink || recipe.strMeal,\n      category: recipe.strCategory || '',\n      image: recipe.strDrinkThumb || recipe.strMealThumb,\n      tags: recipe.strTags ? recipe.strTags.split(',') : [],\n      alcoholicOrNot: recipe.strAlcoholic || '',\n      type: pathname.includes('/drinks') ? 'drink' : 'meal',\n      doneDate: date.toISOString()\n    };\n    if (!doneStorage || !doneStorage.includes(id)) {\n      localStorage.setItem('doneRecipes', JSON.stringify([...doneRecipe, receita]));\n    }\n    history.push('/done-recipes');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ButtonFavorite, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonShare, {\n      testid: \"share-btn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardRecipeDetails, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-testid\": \"finish-recipe-btn\",\n      disabled: !allChecked,\n      onClick: finishRecipe,\n      children: \"Finish Recipe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(RecipeInProgress, \"S5kB8pLQosT/KpzbGADZdx6kJtI=\", false, function () {\n  return [useLocation, useParams, useHistory];\n});\n_c = RecipeInProgress;\nvar _c;\n$RefreshReg$(_c, \"RecipeInProgress\");","map":{"version":3,"names":["useContext","useEffect","useHistory","useLocation","useParams","ButtonFavorite","ButtonShare","CardRecipeDetails","RecipeContext","RecipeInProgress","allChecked","recipe","pathname","id","history","date","Date","now","recipes","JSON","parse","localStorage","getItem","drinks","meals","includes","setItem","stringify","finishRecipe","doneStorage","doneRecipe","receita","idDrink","idMeal","nationality","strArea","name","strDrink","strMeal","category","strCategory","image","strDrinkThumb","strMealThumb","tags","strTags","split","alcoholicOrNot","strAlcoholic","type","doneDate","toISOString","push"],"sources":["/Applications/Git/trybe github/trybe/projetos/projeto-app-receita/sd-030-a-project-recipes-app/src/pages/RecipeInProgress.jsx"],"sourcesContent":["import { useContext, useEffect } from 'react';\nimport {\n  useHistory,\n  useLocation, useParams,\n} from 'react-router-dom/cjs/react-router-dom.min';\nimport ButtonFavorite from '../components/ButtonFavorite';\nimport ButtonShare from '../components/ButtonShare';\nimport CardRecipeDetails from '../components/CardRecipeDetails';\nimport RecipeContext from '../context/RecipeContext';\n\nexport default function RecipeInProgress() {\n  const { allChecked, recipe } = useContext(RecipeContext);\n  const { pathname } = useLocation();\n  const { id } = useParams();\n  const history = useHistory();\n\n  const date = new Date(Date.now());\n\n  useEffect(() => {\n    const recipes = JSON.parse(localStorage.getItem('inProgressRecipes'))\n    || { drinks: {}, meals: {} };\n\n    if (pathname.includes('/meals') && !recipes.meals[id]) recipes.meals[id] = [];\n    if (pathname.includes('/drinks') && !recipes.drinks[id]) recipes.drinks[id] = [];\n\n    localStorage.setItem('inProgressRecipes', JSON.stringify(recipes));\n  }, [pathname, id]);\n\n  const finishRecipe = () => {\n    const doneStorage = localStorage.getItem('doneRecipes');\n    const doneRecipe = JSON.parse(localStorage.getItem('doneRecipes')) || [];\n    const receita = {\n      id: recipe.idDrink || recipe.idMeal,\n      nationality: recipe.strArea || '',\n      name: recipe.strDrink || recipe.strMeal,\n      category: recipe.strCategory || '',\n      image: recipe.strDrinkThumb || recipe.strMealThumb,\n      tags: recipe.strTags ? recipe.strTags.split(',') : [],\n      alcoholicOrNot: recipe.strAlcoholic || '',\n      type: pathname.includes('/drinks') ? 'drink' : 'meal',\n      doneDate: date.toISOString(),\n    };\n    if (!doneStorage || !doneStorage.includes(id)) {\n      localStorage.setItem('doneRecipes', JSON.stringify([...doneRecipe, receita]));\n    }\n    history.push('/done-recipes');\n  };\n  return (\n    <div>\n      <ButtonFavorite />\n      <ButtonShare testid=\"share-btn\" />\n      <CardRecipeDetails />\n      <button\n        data-testid=\"finish-recipe-btn\"\n        disabled={ !allChecked }\n        onClick={ finishRecipe }\n      >\n        Finish Recipe\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}